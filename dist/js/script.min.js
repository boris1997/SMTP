class Direction{constructor(t,i,e){this.directionsBody=t,this.directions=i,this.directionActive=e,this.initEvents()}initEvents=()=>{this.directionResizeObserver()};removeClass=(t,i)=>{console.log(t,i),t.classList.remove(i)};addClass=(t,i)=>{this.directions.indexOf(t)%3!=0&&t.classList.add(i)};directionRzeObrCallback=t=>{console.log(this.directions),this.directions.map(((t,i)=>{let e=+window.getComputedStyle(t).marginTop.split("px").join("");e=+e.toFixed();let s=t.parentNode.getBoundingClientRect().top;s=+s.toFixed();let o=t.getBoundingClientRect().top;o=+o.toFixed(),o-s>e&&t.classList.contains(this.directionActive)&&this.directions.indexOf(t)%3!=0&&(this.removeClass(t,this.directionActive),t.previousElementSibling.style.marginRight="40px",console.log(t,o-s,e)),o-s!==e||t.classList.contains(this.directionActive)||this.directions.indexOf(t)%3==0||(console.log(t,o-s,e),t.previousElementSibling.style.marginRight="0",this.addClass(t,this.directionActive))}))};directionResizeObserver=t=>{console.log(t),this.resizerDirection=new ResizeObserver(this.directionRzeObrCallback),this.resizerDirection.observe(this.directionsBody)}}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".direction__item")],i=document.querySelector(".direction__body-wrapper");0!==t.length&&new Direction(i,t,"direction__item--margin")}));class Accordion{constructor(t,i,e,s){this.btn=t,this.text=i,this.activeBtn=e,this.textBtn=s,this.initEvents()}initEvents=()=>{void 0!==this.btn.length?this.initArrayBtn():this.initBtn()};initArrayBtn=()=>{this.btn.map(((t,i)=>{t.addEventListener("click",(()=>{this.changeTextVisibility(this.text[i],t),this.textBtn&&this.changeBtnText(t)}))}))};initBtn=()=>{this.btn.addEventListener("click",(()=>{this.changeTextVisibility(this.text,this.btn),this.textBtn&&this.changeBtnText(this.btn)}))};changeTextVisibility=(t,i)=>{0===t.clientHeight?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight=0,i.classList.toggle(this.activeBtn)};changeBtnText=t=>{t.classList.contains(this.activeBtn)?t.textContent=this.textBtn[0]:t.textContent=this.textBtn[1]}}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".faq-btn")],i=[...document.querySelectorAll(".item-faq__text")];console.log(t),0!==t.length&&new Accordion(t,i,"incDec-btn--minus");const e=document.querySelector(".cities__list-hidden"),s=document.querySelector(".cities__link");console.log(e),null!==e&&new Accordion(s,e,"cities__link--hide",["Все города","Свернуть"])}));class CountTarif{constructor(t,i,e,s){this.switchRadio=t,this.switchLabel=i,this.togglersTariff=e,this.totalPriceEl=s,this.discountPrice=1600,this.primaryPriceIndex=1,this.priceIndex=1,this.limitier=10,this.disountArr=[],this.totalPrice=this.strToNumbaer(this.totalPriceEl),this.primaryPrice=this.totalPrice,this.tariffIndicators={indicator:[],discount:1}}setDiscounts=()=>{for(let t=0;t<=this.limitier;t++)0===t&&this.disountArr.push(1),1===t&&this.disountArr.push(.9),t>1&&this.disountArr.push(.85)};getindicators=()=>this.togglersTariff.map((t=>{this.tariffIndicators.indicator.push(this.strToNumbaer(t.children[1]))}));initSwitchTariffBtns=()=>{this.switchRadio.map(((t,i)=>t.addEventListener("click",(()=>this.changeTariff(i))))),this.switchLabel.map(((t,i)=>t.addEventListener("click",(()=>this.changeTariff(i)))))};initTogglers=()=>{this.togglersTariff.map(((t,i)=>t.addEventListener("click",(e=>this.toggleTariffIndicators(e,t,i)))))};toggleTariffIndicators=(t,i,e)=>{console.log(t.target.classList),t.target.classList.contains("incDec-btn__dec")&&this.decrIndicator(e),t.target.classList.contains("incDec-btn__inc")&&this.incrIndicator(e),console.log(t.target,i,e)};decrIndicator=t=>{console.log(this.tariffIndicators),this.priceIndex>1&&(this.priceIndex--,this.togglersTariff.map(((t,i)=>{let e=this.strToNumbaer(this.togglersTariff[i].children[1])-this.tariffIndicators.indicator[i];this.togglersTariff[i].children[1].textContent=this.addSpacesToNum(e)})),this.countTotalPrice(),this.showTotalPrice())};incrIndicator=t=>{console.log(this.tariffIndicators),this.priceIndex<this.limitier&&(this.priceIndex++,this.togglersTariff.map(((t,i)=>{let e=this.strToNumbaer(this.togglersTariff[i].children[1])+this.tariffIndicators.indicator[i];this.togglersTariff[i].children[1].textContent=this.addSpacesToNum(e)})),this.countTotalPrice(),this.showTotalPrice())};countTotalPrice=()=>{console.log(this.primaryPrice,this.disountArr[this.priceIndex]),this.discountPrice=this.primaryPrice*this.disountArr[this.priceIndex-1],console.log(this.discountPrice),this.totalPrice=this.discountPrice*this.priceIndex,console.log(this.priceIndex)};addSpacesToNum=t=>{t=t.toString().split("");for(let i=3;i<=t.length;i+=4)t.reverse().splice(i,0," "),t=t.reverse();return t.join("")};changeTariff=t=>{console.log(this.totalPrice),this.primaryPrice=0===t?1600:1800,console.log(this.discountPrice),this.countTotalPrice(),this.showTotalPrice()};showTotalPrice=()=>{const t=this.totalPrice;this.totalPriceEl.textContent=this.addSpacesToNum(t)};strToNumbaer=t=>+t.textContent.replace(/\s+/g,"")}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".switch-radio__input")],i=[...document.querySelectorAll(".switch-radio__label")],e=[...document.querySelectorAll(".togglers-tariff__btn")],s=document.querySelector(".total-price__amount");if(console.log(t),0!==t.length&&0!==t.length&&0!==e.length&&null!==s){const o=new CountTarif(t,i,e,s);o.getindicators(),o.initSwitchTariffBtns(),o.initTogglers(),o.setDiscounts()}}));class Modal{constructor(t,i,e,s,o,n,c,l,r,a){this.body=t,this.popup=i,this.popupModal=e,this.btnPopup=s,this.closeBtn=o,this.formInputs=n,this.popupModalActive=c,this.popupHidden=l,this.bodyNoScroll=r,this.staticForm=a,this.initEvents()}initEvents=()=>{console.log(this.btnPopup),this.initArrayBtnPopup(),this.initCloseBtn()};initCloseBtn=()=>{this.popup.addEventListener("click",(t=>{console.log(t.target.dataset),(t.target.classList.contains("popup__modal--active")||t.target.classList.contains("popup__modal-close")||"close"===t.target.dataset.modal)&&(t.stopPropagation(),console.log(t.target.classList),this.popupModal.map(((t,i)=>{t.classList.contains(this.popupModalActive)&&(this.removeClass(this.body,this.bodyNoScroll),this.removeNoScrollStyles(this.body),!t.classList.contains(this.staticForm)&&this.removeNoScrollStyles(t),!t.classList.contains(this.staticForm)&&this.removeClass(t,this.popupModalActive),this.addClass(this.popup,this.popupHidden))})))}))};initArrayBtnPopup=()=>{this.btnPopup.map(((t,i)=>{console.log(t,t.type),"submit"===t.type?this.popupModal.map(((t,i)=>{"form"===t.dataset.modal&&this.submitForm(t)})):(console.log(t),t.addEventListener("click",(()=>{this.popupModal.map(((i,e)=>{console.log(i.dataset.modal,t.dataset.modal),t.dataset.modal===i.dataset.modal&&("form"===i.dataset.modal&&this.submitForm(i),this.addNoScrollStyles(i),!this.body.classList.contains(this.bodyNoScroll)&&(this.addNoScrollStyles(this.body),this.addClass(this.body,this.bodyNoScroll)),this.addClass(i,this.popupModalActive),this.popup.classList.contains(this.popupHidden)&&this.removeClass(this.popup,this.popupHidden))}))})))}))};addNoScrollStyles=t=>{t.style.paddingRight=window.innerWidth-this.body.offsetWidth+"px",t.style.width="100vw"};removeNoScrollStyles=t=>{t.style.paddingRight=0,t.style.width="100%"};addClass=(t,i)=>{t.classList.add(i)};removeClass=(t,i)=>{t.classList.remove(i)};submitForm=t=>{console.log(t),t.addEventListener("submit",(i=>{console.log("ok"),i.preventDefault(),!t.classList.contains(this.staticForm)&&this.removeClass(t,this.popupModalActive),this.popup.classList.contains(this.popupHidden)&&this.removeClass(this.popup,this.popupHidden),this.clearFields(this.formInputs),this.popupModal.map(((t,e)=>{"success"===t.dataset.modal&&(console.log(this.staticForm),this.addClass(t,this.popupModalActive)),console.log(i.target,t)}))}))};clearFields=t=>{console.log(t),t.map(((t,i)=>t.value=""))}}document.addEventListener("DOMContentLoaded",(()=>{if(null!==document.getElementById("popup-main")){let t=document.querySelector(".body"),i=document.querySelector(".popup"),e=[...document.querySelectorAll(".popup__modal")],s=[...document.querySelectorAll(".btn__popup")],o=[...document.querySelectorAll(".popup__modal-close")],n=[...document.querySelectorAll(".contact-form__input")],c="popup__modal--active",l="popup--hidden",r="body--noscroll";console.log(o),new Modal(t,i,e,s,o,n,c,l,r)}if(null!==document.getElementById("popup-contact")){let t=document.querySelector(".body"),i=document.querySelector(".popup"),e=[...document.querySelectorAll(".popup__modal")],s=[...document.querySelectorAll(".btn__popup")],o=[...document.querySelectorAll(".popup__modal-close")],n=[...document.querySelectorAll(".contact-form__input")];new Modal(t,i,e,s,o,n,"popup__modal--active","popup--hidden","body--noscroll","contact__form")}}));